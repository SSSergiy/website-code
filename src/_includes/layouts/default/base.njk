<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{{ page.title or client.site.title }}</title>
	<meta name="description" content="{{ page.description or client.site.description }}">

	<!-- Tailwind CSS CDN -->
	<script src="https://cdn.tailwindcss.com"></script>

	<!-- Custom CSS -->
	<link rel="stylesheet" href="/assets/css/style.css">
</head>

<body class="antialiased">
	<main>
		{% set currentPage = null %}
		{% set pageSlug = page.url | replace('/', '') or 'index' %}

		{# Находим текущую страницу в данных #}
		{% set currentUrl = page.url | replace('/index.html', '/') | replace('//', '/') %}
		{% for pageData in client.pages %}
		{% if pageData.slug == currentUrl or (pageData.slug == '/' and currentUrl == '/') %}
		{% set currentPage = pageData %}
		{% endif %}
		{% endfor %}

		{# Если не нашли, используем главную страницу #}
		{% if not currentPage %}
		{% set currentPage = client.pages[0] %}
		{% endif %}

		{# Рендерим секции #}
		{% if currentPage and currentPage.sections %}
		{% for section in currentPage.sections %}
		{% if section.enabled and section.type != 'header' and section.type != 'footer' %}
		{% include "components/" + section.type + ".njk" %}
		{% endif %}
		{% endfor %}
		{% endif %}
	</main>

	<!-- Main JS -->
	<script type="module" src="/assets/js/main.js"></script>
</body>

</html>